DB 사이트 로그인 후, 메뉴에서 SQL명령 클릭->아래의 내용 복붙하면 데이터 입력됨

START TRANSACTION;

-- 1) users (필수: email, password, createdAt, updatedAt)
INSERT INTO users (
  email, password, serialNumber, nickname, gender, createdAt, updatedAt
) VALUES
  ('gildong@example.com',  'pass1234', NULL, '홍길동', 0, NOW(), NOW()),
  ('chulsoo@example.com',  'pass1234', NULL, '김철수', 0, NOW(), NOW()),
  ('younghee@example.com', 'pass1234', NULL, '이영희', 0, NOW(), NOW());

-- 2) workspaces (필수: name, createdAt, updatedAt)
--    userId(소유자)는 선택. 첫 번째 워크스페이스의 소유자를 '홍길동'으로 지정해 보자.
INSERT INTO workspaces (name, userId, createdAt, updatedAt)
VALUES
  ('Alpha',
   (SELECT id FROM users WHERE email='gildong@example.com' LIMIT 1),
   NOW(), NOW()),
  ('Beta', NULL, NOW(), NOW());

-- 3) workspaceRoles (필수: name, workspaceId, createdAt, updatedAt)
--    (workspaceId, name) 유니크 제약 충족
INSERT INTO workspaceRoles (name, workspaceId, createdAt, updatedAt)
VALUES
  ('Admin',   (SELECT id FROM workspaces WHERE name='Alpha' LIMIT 1), NOW(), NOW()),
  ('Member',  (SELECT id FROM workspaces WHERE name='Alpha' LIMIT 1), NOW(), NOW()),
  ('Manager', (SELECT id FROM workspaces WHERE name='Beta'  LIMIT 1), NOW(), NOW()),
  ('Member',  (SELECT id FROM workspaces WHERE name='Beta'  LIMIT 1), NOW(), NOW());

-- 4) workspaceUsers (필수: workspaceId, userId, createdAt, updatedAt)
--   홍길동: Alpha=Admin,  Beta=Member
--   김철수: Alpha=Member
--   이영희: 소속 없음
INSERT INTO workspaceUsers (workspaceId, userId, workspaceRoleId, createdAt, updatedAt)
VALUES
  (
    (SELECT id FROM workspaces WHERE name='Alpha' LIMIT 1),
    (SELECT id FROM users WHERE email='gildong@example.com' LIMIT 1),
    (SELECT wr.id FROM workspaceRoles wr JOIN workspaces w ON wr.workspaceId=w.id
      WHERE w.name='Alpha' AND wr.name='Admin' LIMIT 1),
    NOW(), NOW()
  ),
  (
    (SELECT id FROM workspaces WHERE name='Beta' LIMIT 1),
    (SELECT id FROM users WHERE email='gildong@example.com' LIMIT 1),
    (SELECT wr.id FROM workspaceRoles wr JOIN workspaces w ON wr.workspaceId=w.id
      WHERE w.name='Beta' AND wr.name='Member' LIMIT 1),
    NOW(), NOW()
  ),
  (
    (SELECT id FROM workspaces WHERE name='Alpha' LIMIT 1),
    (SELECT id FROM users WHERE email='chulsoo@example.com' LIMIT 1),
    (SELECT wr.id FROM workspaceRoles wr JOIN workspaces w ON wr.workspaceId=w.id
      WHERE w.name='Alpha' AND wr.name='Member' LIMIT 1),
    NOW(), NOW()
  );

-- 5) recommendation (필수: fromWorkspaceUserId, toWorkspaceUserId, content, createdAt, updatedAt)
--   Alpha에서 홍길동이 김철수를 추천, Beta에서 홍길동이 자기 팀원(없다면 NULL 처리)에게 추천하는 예
INSERT INTO recommendation (fromWorkspaceUserId, toWorkspaceUserId, content, createdAt, updatedAt)
VALUES
  (
    -- from: 홍길동@Alpha
    (SELECT wu.id
       FROM workspaceUsers wu
       JOIN users u ON u.id=wu.userId
       JOIN workspaces w ON w.id=wu.workspaceId
      WHERE u.email='gildong@example.com' AND w.name='Alpha'
      LIMIT 1),
    -- to: 김철수@Alpha
    (SELECT wu.id
       FROM workspaceUsers wu
       JOIN users u ON u.id=wu.userId
       JOIN workspaces w ON w.id=wu.workspaceId
      WHERE u.email='chulsoo@example.com' AND w.name='Alpha'
      LIMIT 1),
    '홍길동이 김철수를 추천합니다.',
    NOW(), NOW()
  );

COMMIT;
